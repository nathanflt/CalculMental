<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#302b63">
    <title>Calcul Mental</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="night-mode">
    <button class="theme-toggle" onclick="toggleTheme()">â˜€ï¸ / ğŸŒ™</button>

    <div class="container">
        <h1>âš¡ CALCUL MENTAL âš¡</h1>

        <!-- SÃ©lection niveau d'Ã©tude -->
        <div class="study-level-selection" id="studyLevelSelection">
            <h2 style="color: white; text-align: center; margin-bottom: 30px;">Quel est ton niveau d'Ã©tude ?</h2>
            <button class="level-btn level-1" onclick="selectStudyLevel('primaire')">
                <span>ğŸ’ Primaire<br><small>CP Ã  CM2</small></span>
            </button>
            <button class="level-btn level-2" onclick="selectStudyLevel('college')">
                <span>ğŸ“š CollÃ¨ge<br><small>6Ã¨me Ã  3Ã¨me</small></span>
            </button>
            <button class="level-btn level-3" onclick="selectStudyLevel('lycee')">
                <span>ğŸ“ LycÃ©e<br><small>Seconde Ã  Terminale</small></span>
            </button>
            <button class="level-btn level-4" onclick="selectStudyLevel('superieur')">
                <span>ğŸ”¬ Ã‰tudes SupÃ©rieures<br><small>UniversitÃ© / Ã‰cole</small></span>
            </button>
        </div>

        <!-- SÃ©lection mode de jeu -->
        <div class="game-mode-selection" id="gameModeSelection" style="display: none;">
            <button class="btn btn-back" onclick="backToStudyLevel()" style="margin-bottom: 20px;">â† Changer de niveau d'Ã©tude</button>
            <h2 style="color: white; text-align: center; margin-bottom: 30px;">Choisis ton mode de jeu :</h2>
            
            <button class="level-btn level-1" onclick="selectGameMode('classic')">
                <span>âš¡ Mode Classique<br><small>3 vies â€¢ Timer 15s par question</small></span>
            </button>
            
            <button class="level-btn level-2" onclick="selectGameMode('chrono60')">
                <span>â±ï¸ Chrono 60s<br><small>Maximum de bonnes rÃ©ponses en 1 minute</small></span>
            </button>
            
            <button class="level-btn level-3" onclick="selectGameMode('chrono90')">
                <span>â±ï¸ Chrono 1min30<br><small>Maximum de bonnes rÃ©ponses en 1 minute 30</small></span>
            </button>
            
            <button class="level-btn level-4" onclick="selectGameMode('chrono180')">
                <span>â±ï¸ Chrono 3min<br><small>Maximum de bonnes rÃ©ponses en 3 minutes</small></span>
            </button>
            
            <button class="level-btn" style="background: linear-gradient(45deg, #159957, #155799); box-shadow: 0 0 20px rgba(21, 153, 87, 0.5);" onclick="selectGameMode('training')">
                <span>ğŸ¯ Mode EntraÃ®nement<br><small>Sans chrono â€¢ Sans vies â€¢ Sans stress</small></span>
            </button>
        </div>

        <!-- Menu de sÃ©lection niveau de difficultÃ© -->
        <div class="menu" id="menu" style="display: none;">
            <button class="btn btn-back" onclick="backToGameMode()" style="margin-bottom: 20px;">â† Changer de mode</button>
            <h2 style="color: white; text-align: center; margin-bottom: 30px;">Choisis ton niveau :</h2>
            <button class="level-btn level-1" onclick="startGame(1)">
                <span id="level1Desc">ğŸŸ¢ Niveau 1 - Facile</span>
            </button>
            <button class="level-btn level-2" onclick="startGame(2)">
                <span id="level2Desc">ğŸŸ¡ Niveau 2 - Moyen</span>
            </button>
            <button class="level-btn level-3" onclick="startGame(3)">
                <span id="level3Desc">ğŸŸ  Niveau 3 - Difficile</span>
            </button>
            <button class="level-btn level-4" onclick="startGame(4)">
                <span id="level4Desc">ğŸ”´ Niveau 4 - Expert</span>
            </button>
            
            <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                <h3 style="color: white; margin-bottom: 10px;">ğŸ“Š Meilleurs Scores</h3>
                <div id="records" style="color: rgba(255,255,255,0.8);"></div>
            </div>
        </div>

        <!-- Zone de jeu -->
        <div class="game-area" id="gameArea">
            <div class="timer-bar" id="timerBar">
                <div class="timer-fill" id="timerFill"></div>
            </div>

            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-box" id="livesBox">
                    <div class="stat-label">Vies</div>
                    <div class="stat-value hearts" id="lives">â¤ï¸â¤ï¸â¤ï¸</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label" id="timerLabel">Temps</div>
                    <div class="stat-value" id="timer">15</div>
                </div>
            </div>

            <div class="question-box">
                <div class="question" id="question">5 + 3 = ?</div>
                <input type="number" 
                       inputmode="numeric" 
                       pattern="[0-9]*"
                       class="answer-input" 
                       id="answerInput" 
                       placeholder="?" 
                       autocomplete="off"
                       autofocus>
            </div>

            <div style="text-align: center;">
                <button class="btn btn-submit" onclick="checkAnswer()">âœ“ Valider</button>
                <button class="btn btn-back" onclick="backToMenu()">â† Retour</button>
            </div>

            <div class="feedback" id="feedback"></div>
        </div>

        <!-- Game Over -->
        <div class="game-over" id="gameOver">
            <h2>ğŸ® GAME OVER ğŸ®</h2>
            <div class="final-score">Score final: <span id="finalScore">0</span></div>
            <div class="record" id="recordMessage"></div>
            <button class="btn btn-submit" onclick="backToMenu()" style="margin-top: 30px;">ğŸ”„ Rejouer</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
